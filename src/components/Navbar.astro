---
// src/components/Navbar.astro

// 1. Tipado
interface MenuItem {
  name: string;
  href: string;
}

interface Translation {
  menu: MenuItem[];
  // Contacto eliminado
  langLabel: string; 
}

// 2. Configuración i18n
const i18n: Record<string, Translation> = {
  es: {
    menu: [
      { name: 'Inicio', href: '/' },
      { name: 'Escritor', href: '/escritor' },
      { name: 'Artista', href: '/artista' },
    ],
    // Contacto eliminado
    langLabel: 'EN' 
  },
  en: {
    menu: [
      { name: 'Home', href: '/en' },
      { name: 'Writer', href: '/en/writer' },
      { name: 'Artist', href: '/en/artist' },
    ],
    // Contacto eliminado
    langLabel: 'ES'
  }
};

// 3. Datos actuales
const currentLocale = Astro.currentLocale || 'es';
const t = i18n[currentLocale] || i18n['es'];

// 4. Lógica de Ruteo para el cambio de idioma
const routeMap: Record<string, string> = {
  // De Español a Inglés
  '/': '/en',
  '/escritor': '/en/writer',
  '/artista': '/en/artist',
  // De Inglés a Español
  '/en': '/',
  '/en/': '/', 
  '/en/writer': '/escritor',
  '/en/artist': '/artista',
};

// Normalizamos la ruta actual
const currentPath = Astro.url.pathname.replace(/\/$/, "") || "/";
const targetLangHome = currentLocale === 'es' ? '/en' : '/';
const translatedPath = routeMap[currentPath] || targetLangHome;

// (Lógica de WhatsApp eliminada)
---

<header class="sticky top-0 w-full z-50 transition-all duration-300 bg-black/50 backdrop-blur-md border-b border-white/5">
  
  <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-center relative">

    <nav>
      <ul class="flex items-center gap-8 md:gap-10 list-none m-0 p-0">
        
        {/* Enlaces del Menú */}
        {t.menu.map((item) => (
          <li>
            <a 
              href={item.href}
              class="text-xs md:text-sm font-medium uppercase tracking-[0.2em] text-gray-400 hover:text-white transition-colors duration-300"
            >
              {item.name}
            </a>
          </li>
        ))}

        {/* Separador Vertical Sutil */}
        <li class="h-4 w-px bg-white/20"></li>

        {/* Botón de Idioma (EN | ES) */}
        <li>
          <div class="flex items-center gap-2 text-xs md:text-sm font-bold uppercase tracking-widest text-white">
            {/* EN: Si el idioma actual es EN, mostramos texto estático. Si no, mostramos enlace. */}
            {currentLocale === 'en' ? (
              <span class="text-accent cursor-default">EN</span>
            ) : (
              <a 
                href={translatedPath} 
                class="hover:text-accent transition-colors duration-300"
              >
                EN
              </a>
            )}

            <span class="opacity-50">|</span>

            {/* ES: Si el idioma actual es ES, mostramos texto estático. Si no, mostramos enlace. */}
            {currentLocale === 'es' ? (
              <span class="text-accent cursor-default">ES</span>
            ) : (
              <a 
                href={translatedPath} 
                class="hover:text-accent transition-colors duration-300"
              >
                ES
              </a>
            )}
          </div>
        </li>

      </ul>
    </nav>

  </div>
</header>